<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width initial-scale=1"
  />

  <title>anlg.archv</title>
  <link rel="icon" type="image/x-icon" href="public/assets/favicon.png">

  <link
    rel="preconnect"
    href="https://fonts.googleapis.com"
  >
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  >
  <link
    href="https://fonts.googleapis.com/css2?family=Jost:wght@100..900&display=swap"
    rel="stylesheet"
  >
  <link
    rel="stylesheet"
    href="style.css"
  />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Courier+Prime:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">


  <!--  DOMPurify cleans up HTML to prevent XSS attacks
  https://www.jsdelivr.com/package/npm/dompurify  -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.3.0/dist/purify.min.js"></script>

</head>

<body>
  <header>
    <h1>analogue.archive</h1>
    <button id="createButton">add new album</button>
  </header>

  <section id="status">
    <p id="readyStatus">✅ MongoDB is Ready</p>
    <p id="notReadyStatus">❌ MongoDB is not connected. Please check your connection string in <code>.env</code> file.
    </p>
  </section>

  <dialog id="formDialog">
    <div class="modal-container">
      <div class="modal-header">
        <h2>Add an album</h2>
      </div>

      <div class="modal-body">
        <form
          id="myForm"
          method="dialog"
        >
          <!-- Hidden field to store ID for updates -->
          <input
            type="hidden"
            name="id"
            id="id"
          />

          <!-- Hidden field to store image data -->
          <input
            type="hidden"
            name="imageUrl"
            id="imageUrl"
          />

          <div class="leftForm">
            <fieldset>
              <label for="title">Title</label>
              <input
                required
                type="text"
                name="title"
                id="title"
                placeholder="e.g. A Matter of Time"
                autocomplete="off"
              />
              <small class="validation">Title is required</small>
            </fieldset>

            <fieldset>
              <label for="artist">Artist</label>
              <input
                required
                type="text"
                name="artist"
                id="artist"
                placeholder="e.g. Laufey"
                autocomplete="off"
              />
              <small class="validation">Artist is required</small>
            </fieldset>

            <fieldset>
              <label for="dateBought">Date Bought</label>
              <input
                type="date"
                name="dateBought"
                id="dateBought"
              />
            </fieldset>
            
            <fieldset>
              <label for="storeId">Bought from</label>
              <input
                type="text"
                name="storeId"
                id="storeId"
                placeholder="e.g. Sonic Boom, Kops Records"
              />
            </fieldset>

            <fieldset>
              <label for="notes">Notes</label>
              <textarea
                placeholder="Notes about pressing, condition, or special edition"
                name="notes"
                id="notes"
                rows="5"
                cols="30"
              ></textarea>
            </fieldset>

            <fieldset>
              <legend>Release Type</legend>
              <div class="release">
                <div class="releaseCol">
                  <label for="releaseType_single">
                    <input type="radio" name="releaseType" id="releaseType_single" value="Single">
                    Single
                  </label>
                  <label for="releaseType_ep">
                    <input type="radio" name="releaseType" id="releaseType_ep" value="EP">
                    EP
                  </label>
                  <label for="releaseType_fullLength">
                    <input type="radio" name="releaseType" id="releaseType_fullLength" value="Full length">
                    Full length
                  </label>
                </div>
              </div>

              <div class="releaseCol">
                <label for="releaseType_liveAlbum">
                  <input type="radio" name="releaseType" id="releaseType_liveAlbum" value="Live album">
                  Live album
                </label>
                <label for="releaseType_remix">
                  <input type="radio" name="releaseType" id="releaseType_remix" value="Remix">
                  Remix
                </label>
                <label for="releaseType_compilation">
                  <input type="radio" name="releaseType" id="releaseType_compilation" value="Compilation">
                  Compilation
                </label>
              </div>

              <div class="releaseCol">
                <label for="releaseType_demo">
                  <input type="radio" name="releaseType" id="releaseType_demo" value="Demo">
                  Demo
                </label>
                <label for="releaseType_soundtrack">
                  <input type="radio" name="releaseType" id="releaseType_soundtrack" value="Soundtrack">
                  Soundtrack
                </label>
              </div>
            </fieldset>
          </div>
        
          <div class="rightForm">
            <!-- Image upload section -->
            <fieldset class="upload-fieldset">
              <legend>Image of your album</legend>
              <div id="uploadArea">
                <img
                  id="imagePreview"
                  src="assets/photo.svg"
                  alt="Image preview"
                />
                <div class="upload-controls">
                  <input
                    type="file"
                    id="fileInput"
                    accept="image/*"
                    style="display:none"
                  />
                  <button
                    type="button"
                    id="browseButton"
                  >Browse</button>
                  <button
                    type="button"
                    id="removeImageButton"
                    style="display:none;"
                  >Remove</button>
                  <p id="uploadInstructions">or drag and drop an image here</p>
                </div>
              </div>
              <div
                id="noticeArea"
                style="display:none"
              ></div>
            </fieldset>

            <fieldset>
              <legend>Format</legend>
              <label for="format_vinyl">
                <input type="radio" name="format" id="format_vinyl" value="Vinyl">
                Vinyl
              </label>
              <label for="format_cd">
                <input type="radio" name="format" id="format_cd" value="CD">
                CD
              </label>
              <label for="format_cassette">
                <input type="radio" name="format" id="format_cassette" value="Cassette">
                Cassette
              </label>
            </fieldset>

            <fieldset>
              <label for="version">Version</label>
              <input
                type="text"
                name="version"
                id="version"
                placeholder="e.g. Timeless Blue Cassette"
              />
            </fieldset>
          </div>

        </form>
      </div>

      <div class="modal-footer">
        <button
          type="button"
          class="save"
          id="saveButton"
        >Save</button>
        <button
          type="button"
          class="cancel"
          id="cancelButton"
        >Cancel</button>
      </div>
    </div>
  </dialog>

  <main>
    <h2>My library</h2>
    <section id="contentArea"></section>
  </main>

  <section id="intro">
    <h3>About</h3>
      <p>
        Welcome to your analogue.archive. This is your personal collection database where you can catalogue your analogue music media. You're welcome and invited to add all your records, CDs, and cassettes to your archive and keep track of your collection.<br>
        Wanna see the code? Check out my <a href="https://github.com/candidcanvas/analog-archive" target="_blank" rel="noopener noreferrer">GitHub repository</a>.
      </p>
  </section>

  <footer>
    Designed by Breana Velasco<br>
    Fall Semester 2025 for Interaction Design at Sheridan College<br>
    Persistent Data for System Design: Databases and Dynamic Data
  </footer>

  <script
    src="script.js"
    type="module"
  ></script>

  <script src="upload.js"></script>

</body>

</html>