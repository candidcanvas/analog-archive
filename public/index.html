<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width initial-scale=1"
  />

  <title>anlg.archv</title>

  <link
    rel="preconnect"
    href="https://fonts.googleapis.com"
  >
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  >
  <link
    href="https://fonts.googleapis.com/css2?family=Jost:wght@100..900&display=swap"
    rel="stylesheet"
  >
  <link
    rel="stylesheet"
    href="style.css"
  />

  <!--  DOMPurify cleans up HTML to prevent XSS attacks
  https://www.jsdelivr.com/package/npm/dompurify  -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.3.0/dist/purify.min.js"></script>

</head>

<body>
  <header>
    <h1>analogue.archive</h1>
  </header>
  <section id="status">
    <p id="readyStatus">‚úÖ MongoDB is Ready</p>
    <p id="notReadyStatus">‚ùå MongoDB is not connected. Please check your connection string in <code>.env</code> file.
    </p>
  </section>
  <button id="createButton">Create New Album</button>

  <dialog id="formDialog">
    <div class="modal-container">
      <div class="modal-header">
        <h2>üéµ Add an Album</h2>
        <p>Share your record with the collection</p>
      </div>

      <div class="modal-body">
        <form
          id="myForm"
          method="dialog"
        >
          <!-- Hidden field to store ID for updates -->
          <input
            type="hidden"
            name="id"
            id="id"
          />

          <!-- Hidden field to store image data -->
          <input
            type="hidden"
            name="imageUrl"
            id="imageUrl"
          />

          <!-- Image upload section -->
          <fieldset class="upload-fieldset">
            <legend>Album Cover</legend>
            <div id="uploadArea">
              <img
                id="imagePreview"
                src="assets/photo.svg"
                alt="Image preview"
              />
              <div class="upload-controls">
                <input
                  type="file"
                  id="fileInput"
                  accept="image/*"
                  style="display:none"
                />
                <button
                  type="button"
                  id="browseButton"
                >Browse</button>
                <button
                  type="button"
                  id="removeImageButton"
                  style="display:none;"
                >Remove</button>
                <p id="uploadInstructions">or drag and drop an image here</p>
              </div>
            </div>
            <div
              id="noticeArea"
              style="display:none"
            ></div>
          </fieldset>

          <fieldset>
            <label for="title">Album Title</label>
            <input
              required
              type="text"
              name="title"
              id="title"
              placeholder="e.g. Dark Side of the Moon"
              autocomplete="off"
            />
            <small class="validation">Title is required</small>
          </fieldset>

          <fieldset>
            <label for="artist">Artist</label>
            <input
              required
              type="text"
              name="artist"
              id="artist"
              placeholder="e.g. Pink Floyd"
              autocomplete="off"
            />
            <small class="validation">Artist is required</small>
          </fieldset>

          <fieldset>
            <label for="dateBought">Date Bought</label>
            <input
              type="date"
              name="dateBought"
              id="dateBought"
            />
          </fieldset>

          <fieldset>
            <label for="storeId">Store / Vendor</label>
            <input
              type="text"
              name="storeId"
              id="storeId"
              placeholder="Record Store or Vendor"
            />
          </fieldset>

          <fieldset>
            <label for="version">Version</label>
            <input
              type="text"
              name="version"
              id="version"
              placeholder="e.g. Original, Reissue, Remastered"
            />
          </fieldset>

          <fieldset>
            <label for="releaseType">Release Type</label>
            <select name="releaseType" id="releaseType">
              <option value="" disabled selected>Select a type</option>
              <option value="single">Single</option>
              <option value="ep">EP</option>
              <option value="full-length">Full Length</option>
            </select>
          </fieldset>

          <fieldset>
            <label for="format">Format</label>
            <select name="format" id="format">
              <option value="" disabled selected>Select a format</option>
              <option value="vinyl">Vinyl</option>
              <option value="cd">CD</option>
              <option value="cassette">Cassette</option>
              <option value="digital">Digital</option>
            </select>
          </fieldset>

          <fieldset>
            <label for="notes">Notes</label>
            <textarea
              placeholder="Notes about pressing, condition, or special edition"
              name="notes"
              id="notes"
              rows="5"
              cols="30"
            ></textarea>
          </fieldset>
        </form>
      </div>

      <div class="modal-footer">
        <button
          type="button"
          class="save"
          id="saveButton"
        >Save</button>
        <button
          type="button"
          class="cancel"
          id="cancelButton"
        >Cancel</button>
      </div>
    </div>
  </dialog>

  <main>
    <h2>üêà Noteworthy Cats</h2>
    <section id="contentArea"></section>
  </main>

  <section id="intro">
    <h3>About</h3>
      <p>
        Welcome to Analogue Archive
      </p>
  </section>

  <footer>
    Built and designed by Breana Velasco<br>
    Fall Semester 2025 for Interaction Design at Sheridan College<br>
    Persistent Data for System Design: Databases and Dynamic Data
  </footer>

  <script
    src="script.js"
    type="module"
  ></script>

  <script src="upload.js"></script>

</body>

</html>